language: java
jdk: oraclejdk8

notifications:
  slack:
    on_success: change
    on_failure: always

cache:
  directories:
    - $HOME/.m2

install: true    

script:
    - git fetch --prune
    - ./set-versions.sh set_release_version
    - mvn install -B -V    

after_success:
   - bash <(curl -s https://codecov.io/bash)      
   - mvn clean test jacoco:report

after_script:
    - ./set-versions.sh set_release_version
    - ./set-versions.sh tag_release  
    - ./set-versions.sh set_snapshot_version 
    - ./set-versions.sh tag_snapshot
    - ./set-versions.sh push     

